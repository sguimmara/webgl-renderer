<!DOCTYPE html>
<html lang="en">

<head>
	<title>Gfx - A textured rectangle</title>
</head>

<body>
	<canvas id="gl" width="800" height="640">
		Your browser does not support WebGL.
	</canvas>
	<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

	<script type="importmap">
        {
            "imports": {
				"uuid": "https://jspm.dev/uuid",
                "gfx": "../build/gfx.module.js"
            }
        }
    </script>

	<script type="module">
		import * as Gfx from 'gfx';

		let ctx = new Gfx.Context(document.getElementById('gl'));

		await ctx.initialize();

		let texData = new Uint8Array([
			255, 0, 0, 255,
			0, 255, 0, 255,
			0, 0, 255, 255,
			255, 255, 255, 255
		]);
		let texture = new Gfx.Texture2D(2, 2);
		texture.data = texData;
		let material = new Gfx.UnlitTexture();
		material.texture = texture;
		let mesh = new Gfx.Mesh();
		mesh.indices = [0, 1, 2, 0, 2, 3];
		mesh.positions = [
			-0.8, -0.8, 0,
			-0.8, +0.8, 0,
			+0.8, +0.8, 0,
			+0.8, -0.8, 0,
		]
		mesh.texcoords = [
			0, 0,
			0, 1,
			1, 1,
			1, 0
		];
		let square = new Gfx.Node(material, mesh);

		function render() {
			ctx.renderNodes([square]);
			requestAnimationFrame(render);
		}

		requestAnimationFrame(render);

	</script>
</body>

</html>
